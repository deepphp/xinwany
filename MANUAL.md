
# Alpha Reactor 5.0 Technical Manual

> **Version**: 5.0 (Deep Quant Fusion)  
> **Module**: Core Documentation  
> **Status**: Production Ready

---

## 1. System Architecture (系统架构)

Alpha Reactor 5.0 represents a paradigm shift from traditional indicator-based trading to a **Hybrid Neural-Math System**. It integrates three core engines:

1.  **ChanLun Pro (Geometric Engine)**: Handles structural analysis (Bi, Segment, Pivot, Divergence).
2.  **Alpha Reactor (Math Engine)**: Handles statistical physics (Hurst, Entropy, Kalman Filter, Monte Carlo).
3.  **Deep Quant (AI Engine)**: Handles feature extraction, decision making (DQN), and ensemble voting (Random Forest).

### 1.1 Data Flow
Raw K-Lines -> `services/crypto.ts` -> `services/indicators.ts` (Calculates Math & ML) -> `services/math_engine.ts` (Online Learning) -> `services/ai.ts` (LLM Context Injection) -> **Strategy Personas**.

---

## 2. Deep Quant Engine (深度量化引擎)

This is the "nuclear weapon" of the system. It uses advanced algorithms to predict price movements and adapt to market conditions.

### 2.1 Online Learning (在线学习)
The system performs a **Daily Backtest** (on the last 50 candles) every time a user loads a new symbol.
- **Adaptive Rules**: If the system detects that standard RSI (30/70) strategies are failing, it automatically adjusts thresholds (e.g., to 20/80) to filter noise.
- **Dynamic Weighting**: Trees (in Random Forest) that perform poorly are "Benched" (weight = 0).

### 2.2 Hierarchical Neural Matrix (分层神经网络)
A 3-layer architecture designed to mimic trader intuition:
1.  **Input Layer**: Extracts VIF-filtered features (Body%, Wick Pressure).
2.  **Context Layer**: Analyzes Multi-Timeframe alignment (4H + 15M trends).
3.  **Decision Layer (DQN)**: Outputs a Q-Value based Action (`LONG`, `SHORT`, `WAIT`).

### 2.3 Random Forest (随机森林)
An ensemble of 5 specialized logic trees:
- **Tree A (Trend)**: ADX + EMA Cross.
- **Tree B (Reversion)**: RSI + Bollinger Bands.
- **Tree C (Volume)**: MFI + OBV.
- **Tree D (Volatility)**: ATR + BB Width.
- **Tree E (Correlation)**: Macro correlation with BTC.

---

## 3. Mathematical Models (数学模型)

### 3.1 Hurst Exponent (赫斯特指数)
- **Range**: 0 to 1.
- **Interpretation**: 
  - `> 0.5`: Trending (Persistence).
  - `< 0.5`: Mean Reverting (Anti-persistence).
  - `= 0.5`: Random Walk (Brownian Motion).

### 3.2 Shannon Entropy (香农熵)
- Measures market disorder.
- **High Entropy (> 0.6)**: Chaos, high noise, low predictability. Strategy: Reduce size / Wait.
- **Low Entropy (< 0.4)**: Ordered structure. Strategy: Aggressive entry.

### 3.3 Kalman Filter (卡尔曼滤波)
- Estimates the "True Price" by stripping away measurement noise.
- **Signal**: Price crossing the Kalman estimate often precedes a trend change.

---

## 4. AI Strategy Personas (AI 策略人格)

The LLM (Gemini) acts as the final decision maker, synthesizing all data.

- **Strategy A (Profitable)**: Aggressive. Uses **DQN** and **Hurst** to find high R:R trades.
- **Strategy B (Systematic)**: Conservative. Strictly follows **Adaptive Rules** (Evolved Thresholds) and **Random Forest** votes.
- **Strategy C (Risk Manager)**: The "No" man. Uses **Model Divergence** and **Macro Stress** to veto trades.
- **CIO (Referee)**: Weighs the **Alpha Consensus Score** to make the final call.

---

## 5. Operational Guide (操作指南)

1.  **Initialization**: Load a symbol. The system automatically runs `OnlineLearner` backtests.
2.  **Quant Lab**: Open the "Deep Quant Lab" to see the Neural Brain's inner workings and VIF feature selection.
3.  **Chat Assistant**: Ask "Why did the RSI rule change?" -> The AI will explain based on recent volatility.
4.  **Strategy Debate**: Click "Strategy Battle" to see A, B, and C argue over the trade setup.

*(Generated by ChanLun AI Architect)*
